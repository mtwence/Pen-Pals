(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{84:function(e,s,a){},89:function(e,s,a){"use strict";a.r(s);var t,n,c,r=a(0),l=a.n(r),i=a(31),o=a.n(i),j=(a(82),a(83),a(84),a(4)),d=a(74),b=a(7),m=a(75),u=a(107),x=a(106),O=a(102),h=a(73),f=a.p+"static/media/logo.5bf3f3d1.png",p=a(2),g=function(){return Object(p.jsx)("div",{class:"col-auto col-md-3 col-xl-2 px-sm-2 px-0 bg-light",children:Object(p.jsx)("div",{class:"d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white min-vh-100",children:Object(p.jsxs)("ul",{class:"nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start",id:"menu",children:[Object(p.jsx)("a",{class:"navbar-brand",href:"/loginsignup",children:Object(p.jsx)("img",{src:f,height:"125",alt:"h2h",loading:"lazy"})}),Object(p.jsx)("li",{children:Object(p.jsxs)("ul",{class:"collapse show nav flex-column ms-1",id:"submenu1","data-bs-parent":"#menu",children:[Object(p.jsx)("li",{class:"w-100",children:Object(p.jsxs)("a",{href:"/",class:"nav-link px-0",children:[Object(p.jsx)("i",{class:"fa fa-pencil fa-fw me-3"}),Object(p.jsx)("span",{class:"d-none d-sm-inline",children:"Write"})]})}),Object(p.jsx)("li",{class:"w-100",children:Object(p.jsxs)("a",{href:"*",class:"nav-link px-0",children:[Object(p.jsx)("i",{class:"fa fa-board fa-fw me-3"}),Object(p.jsx)("span",{class:"d-none d-sm-inline",children:"Board"})]})}),Object(p.jsx)("li",{class:"w-100",children:Object(p.jsxs)("a",{href:"#",class:"nav-link px-0",children:[Object(p.jsx)("i",{class:"fa fa-heart fa-fw me-3"}),Object(p.jsx)("span",{class:"d-none d-sm-inline",children:"Responses"})]})})]})})]})})})},v=a.p+"static/media/letter_card.3b595f95.png",w=function(){return Object(p.jsxs)("div",{class:"row",children:[Object(p.jsxs)("div",{class:"row",children:[Object(p.jsx)("img",{class:"col card-img-top",className:"envelope",src:v,alt:"Card img"}),Object(p.jsx)("img",{class:"col card-img-top",className:"envelope",src:v,alt:"Card img"})]}),Object(p.jsxs)("div",{class:"row",children:[Object(p.jsx)("img",{class:"col card-img-top",className:"envelope",src:v,alt:"Card img"}),Object(p.jsx)("img",{class:"col card-img-top",className:"envelope",src:v,alt:"Card img"})]}),Object(p.jsxs)("form",{action:"/action_page.php",children:[Object(p.jsx)("p",{children:Object(p.jsx)("label",{for:"letter",children:"Write a Letter:"})}),Object(p.jsx)("textarea",{id:"letter",name:"letter",rows:"10",cols:"100",children:"How's your day? How are you feeling? What are your concerns?"}),Object(p.jsx)("button",{type:"submit",class:"btn btn-primary btn-lg",children:"Send"})]})]})},y=function(){return Object(p.jsx)("div",{children:Object(p.jsx)(w,{})})},k=function(){return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{class:"row",children:[Object(p.jsxs)("div",{class:"row",children:[Object(p.jsx)("img",{class:"col card-img-top",className:"envelope",src:v,alt:"Card img"}),Object(p.jsx)("img",{class:"col card-img-top",className:"envelope",src:v,alt:"Card img"})]}),Object(p.jsxs)("div",{class:"row",children:[Object(p.jsx)("img",{class:"col card-img-top",className:"envelope",src:v,alt:"Card img"}),Object(p.jsx)("img",{class:"col card-img-top",className:"envelope",src:v,alt:"Card img"})]})]})})},S=a(19),C=a(38),$=a(49),_=a(10),P=a(108),N=a(53),F=a(104),T=Object(F.a)(t||(t=Object(N.a)(["\n  mutation login($username: String!, $email: String!, $password: String!) {\n    login(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),U=Object(F.a)(n||(n=Object(N.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n        email\n      }\n    }\n  }\n"]))),I=(Object(F.a)(c||(c=Object(N.a)(["\n  mutation deleteUser($_id: String) {\n    deleteUser(id: $_id) {\n      user {\n        _id\n      }\n    }\n  }\n"]))),a(17)),L=a(18),W=a(58),q=new(function(){function e(){Object(I.a)(this,e)}return Object(L.a)(e,[{key:"getProfile",value:function(){return Object(W.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Object(W.a)(e).exp<Date.now()/1e3}catch(s){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}());var D=function(e){var s=Object(r.useState)({username:"",password:""}),a=Object(_.a)(s,2),t=a[0],n=a[1],c=Object(P.a)(T),l=Object(_.a)(c,2),i=l[0],o=l[1].error,d=function(){var e=Object($.a)(Object(C.a)().mark((function e(s){var a,n;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.prev=1,e.next=4,i({variables:{username:t.username,password:t.password}});case 4:a=e.sent,n=a.data.login.token,q.login(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(s){return e.apply(this,arguments)}}(),b=function(e){var s=e.target,a=s.name,c=s.value;n(Object(j.a)(Object(j.a)({},t),{},Object(S.a)({},a,c)))};return Object(p.jsxs)("div",{class:"col-4 container h-100",children:[Object(p.jsx)("h2",{children:"Login"}),Object(p.jsxs)("form",{class:"mx-1 mx-md-4",onSubmit:d,children:[Object(p.jsxs)("div",{class:"d-flex flex-row align-items-center mb-4",children:[Object(p.jsx)("i",{class:"fa fa-user fa-lg me-3 fa-fw"}),Object(p.jsxs)("div",{class:"form-outline flex-fill mb-0",children:[Object(p.jsx)("input",{placeholder:"Your Username, Please",name:"username",type:"username",id:"username",class:"form-control",onChange:b}),Object(p.jsx)("label",{class:"form-label",htmlFor:"username",children:"Username"})]})]}),Object(p.jsxs)("div",{class:"d-flex flex-row align-items-center mb-4",children:[Object(p.jsx)("i",{class:"fa fa-lock fa-lg me-3 fa-fw"}),Object(p.jsxs)("div",{class:"form-outline flex-fill mb-0",children:[Object(p.jsx)("input",{placeholder:"Your Password, Please",name:"password",type:"password",id:"pwd",class:"form-control",onChange:b}),Object(p.jsx)("label",{class:"form-label",htmlFor:"pwd",children:"Password"})]})]}),o?Object(p.jsx)("div",{children:Object(p.jsx)("p",{className:"error-text",children:"The username or password is incorrect."})}):null,Object(p.jsx)("div",{class:"d-flex justify-content-center mx-4 mb-3 mb-lg-4",children:Object(p.jsx)("button",{type:"submit",class:"btn btn-primary btn-lg",children:"Login"})})]})]})},E=a(105),B=a(103),z=a(100);var H=function(e){var s=Object(r.useState)({username:"",email:"",password:""}),a=Object(_.a)(s,2),t=a[0],n=a[1],c=Object(r.useState)(!1),l=Object(_.a)(c,1)[0],i=Object(r.useState)(!1),o=Object(_.a)(i,2),d=o[0],b=o[1],m=Object(P.a)(U),u=Object(_.a)(m,2),x=u[0],O=(u[1].error,function(e){var s=e.target,a=s.name,c=s.value;n(Object(j.a)(Object(j.a)({},t),{},Object(S.a)({},a,c)))}),h=function(){var e=Object($.a)(Object(C.a)().mark((function e(s){var a;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),!1===s.currentTarget.checkValidity()&&(s.preventDefault(),s.stopPropagation()),e.prev=3,e.next=6,x({variables:Object(j.a)({},t)});case 6:a=e.sent,q.login(a.login.token),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),b(!0);case 14:n({username:"",email:"",password:""});case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(s){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{class:"col-4 container h-100",children:[Object(p.jsx)("h2",{children:"Signup"}),Object(p.jsxs)(E.a,{class:"mx-1 mx-md-4",noValidate:!0,validated:l,onSubmit:h,children:[Object(p.jsx)(B.a,{dismissible:!0,onClose:function(){return b(!1)},show:d,variant:"danger",children:"Something went wrong with your signup!"}),Object(p.jsxs)("div",{class:"d-flex flex-row align-items-center mb-4",children:[Object(p.jsx)("i",{class:"fa fa-user fa-lg me-3 fa-fw"}),Object(p.jsx)(E.a.Group,{children:Object(p.jsxs)("div",{class:"form-outline flex-fill mb-0",children:[Object(p.jsx)(E.a.Control,{placeholder:"What will be your username?",name:"username",type:"username",id:"username",class:"form-control",onChange:O,value:t.username,required:!0}),Object(p.jsx)(E.a.Control.Feedback,{type:"invalid",children:"Please enter a name."}),Object(p.jsx)(E.a.Label,{htmlFor:"username",children:"Username:"})]})})]}),Object(p.jsxs)("div",{class:"d-flex flex-row align-items-center mb-4",children:[Object(p.jsx)("i",{class:"fa fa-envelope fa-lg me-3 fa-fw"}),Object(p.jsxs)("div",{class:"form-outline flex-fill mb-0",children:[Object(p.jsx)(E.a.Control,{placeholder:"What is your email?",name:"email",type:"email",id:"email",class:"form-control",onChange:O,value:t.email,required:!0}),Object(p.jsx)(E.a.Control.Feedback,{type:"invalid",children:"Please enter an email."}),Object(p.jsx)(E.a.Label,{htmlFor:"email",children:"Email:"})]})]}),Object(p.jsxs)("div",{class:"d-flex flex-row align-items-center mb-4",children:[Object(p.jsx)("i",{class:"fa fa-lock fa-lg me-3 fa-fw"}),Object(p.jsxs)("div",{class:"form-outline flex-fill mb-0",children:[Object(p.jsx)(E.a.Control,{placeholder:"What password will you set?",name:"password",type:"password",id:"password",class:"form-control",onChange:O,value:t.password,required:!0}),Object(p.jsx)(E.a.Control.Feedback,{type:"invalid",children:"Please enter a password."}),Object(p.jsx)(E.a.Label,{htmlFor:"password",children:"Password:"})]})]}),Object(p.jsx)("div",{class:"d-flex justify-content-center mx-4 mb-3 mb-lg-4",children:Object(p.jsx)(z.a,{disabled:!(t.username&&t.email&&t.password),type:"submit",variant:"success",class:"btn btn-primary btn-lg",children:"Register"})})]})]})},J=function(){return Object(p.jsxs)("div",{class:"row",children:[Object(p.jsx)(D,{}),Object(p.jsx)(H,{})]})},R=Object(m.a)({uri:"/graphql",cache:new u.a}),V=Object(h.a)((function(e,s){var a=s.headers,t=localStorage.getItem("id_token");return{headers:Object(j.a)(Object(j.a)({},a),{},{authorization:t?"Bearer ".concat(t):""})}})),Y=new x.a({link:V.concat(R),cache:new u.a});var G=function(){return Object(p.jsx)(O.a,{client:Y,children:Object(p.jsx)(d.a,{children:Object(p.jsx)("div",{class:"container-fluid",children:Object(p.jsxs)("div",{class:"row flex-nowrap",children:[Object(p.jsx)(g,{}),Object(p.jsx)("div",{class:"col py-3",id:"background",children:Object(p.jsxs)(b.c,{children:[Object(p.jsx)(b.a,{path:"/",element:Object(p.jsx)(y,{})}),Object(p.jsx)(b.a,{path:"*",element:Object(p.jsx)(k,{})}),Object(p.jsx)(b.a,{path:"/loginsignup",element:Object(p.jsx)(J,{})})]})})]})})})})};o.a.render(Object(p.jsx)(l.a.StrictMode,{children:Object(p.jsx)(G,{})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.6875b7a2.chunk.js.map